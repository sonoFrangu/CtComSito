<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CT Communication — Varese</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body class="text-white bg-neutral-950">
    <div class="bg-animated" aria-hidden="true">
      <div class="blob blob--blue"></div>
      <div class="blob blob--violet"></div>
      <div class="blob blob--green"></div>
    </div>
    <div id="header"></div>

    <section class="pt-32 section">
      <div class="container grid items-start gap-8 md:grid-cols-2">
        <div data-aos="fade-up">
          <h1 class="text-4xl font-extrabold leading-tight md:text-5xl">Varese</h1>
          <p class="mt-3 text-neutral-300">Rivenditore multi-operatore e centro assistenza.</p>
          <div class="flex flex-wrap gap-3 mt-6">
            <a href="#servizi" class="btn-primary">Servizi</a>
            <a href="#team" class="btn-primary">Il Team</a>
            <a href="#dispositivi" class="btn-primary">Dispositivi</a>
            <a href="#recensioni" class="btn-primary">Recensioni</a>
          </div>
        </div>
        <div class="card" data-aos="fade-left">
          <h3 class="mb-2 text-lg font-semibold">Servizi in questa sede</h3>
          <ul class="space-y-2">
            <li class="flex gap-3"><span class="w-2 h-2 mt-1 bg-green-500 rounded-full"></span>Attivazioni WindTre, TIM</li>
            <li class="flex gap-3"><span class="w-2 h-2 mt-1 bg-green-500 rounded-full"></span>Fibra Fastweb (zone centrali)</li>
            <li class="flex gap-3"><span class="w-2 h-2 mt-1 bg-green-500 rounded-full"></span>Assistenza smartphone/tablet</li>
            <li class="flex gap-3"><span class="w-2 h-2 mt-1 bg-green-500 rounded-full"></span>Vendita dispositivi e accessori</li>
            <li class="flex gap-3"><span class="w-2 h-2 mt-1 bg-green-500 rounded-full"></span>UPS Access Point</li>
            <li class="flex gap-3"><span class="w-2 h-2 mt-1 bg-green-500 rounded-full"></span>Supporto resi Amazon</li>
            <li class="flex gap-3"><span class="w-2 h-2 mt-1 bg-green-500 rounded-full"></span>Preventivi luce & gas</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="servizi" class="section">
      <div class="container">
        <h2 class="mb-6 text-3xl font-bold md:text-4xl" data-aos="fade-up">Cosa facciamo</h2>
        <div class="grid gap-6 md:grid-cols-3">
          <div class="card" data-aos="fade-up">
            <h3 class="mb-2 text-lg font-semibold">Telefonia & Internet</h3>
            <p class="text-neutral-300">Attivazioni WindTre, TIM. Fibra Fastweb dove disponibile.</p>
          </div>
          <div class="card" data-aos="fade-up" data-aos-delay="100">
            <h3 class="mb-2 text-lg font-semibold">Assistenza tecnica</h3>
            <p class="text-neutral-300">Riparazioni smartphone e tablet, backup dati.</p>
          </div>
          <div class="card" data-aos="fade-up" data-aos-delay="200">
            <h3 class="mb-2 text-lg font-semibold">Spedizioni & Resi</h3>
            <p class="text-neutral-300">UPS Access Point e supporto resi Amazon.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="team" class="section">
      <div class="container">
        <h2 class="mb-6 text-3xl font-bold md:text-4xl" data-aos="fade-up">I nostri dipendenti</h2>
        <div id="team-grid" class="grid gap-6 sm:grid-cols-2 md:grid-cols-3"></div>
      </div>
    </section>

    <section id="galleria" class="section">
      <div class="container">
        <h2 class="mb-6 text-3xl font-bold md:text-4xl" data-aos="fade-up">Galleria negozio</h2>
        <div class="grid gap-4 sm:grid-cols-2 md:grid-cols-3">
          <div class="overflow-hidden card" data-aos="fade-up"><img src="/assets/varese-gallery/1.jpg" alt="Negozio Varese 1" class="object-cover w-full h-48" onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'/assets/varese-gallery/1.jpg mancante',className:'p-4 text-sm text-neutral-400'}))"></div>
          <div class="overflow-hidden card" data-aos="fade-up" data-aos-delay="50"><img src="/assets/varese-gallery/2.jpg" alt="Negozio Varese 2" class="object-cover w-full h-48" onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'/assets/varese-gallery/2.jpg mancante',className:'p-4 text-sm text-neutral-400'}))"></div>
          <div class="overflow-hidden card" data-aos="fade-up" data-aos-delay="100"><img src="/assets/varese-gallery/3.jpg" alt="Negozio Varese 3" class="object-cover w-full h-48" onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'/assets/varese-gallery/3.jpg mancante',className:'p-4 text-sm text-neutral-400'}))"></div>
          <div class="overflow-hidden card" data-aos="fade-up" data-aos-delay="150"><img src="/assets/varese-gallery/4.jpg" alt="Negozio Varese 4" class="object-cover w-full h-48" onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'/assets/varese-gallery/4.jpg mancante',className:'p-4 text-sm text-neutral-400'}))"></div>
          <div class="overflow-hidden card" data-aos="fade-up" data-aos-delay="200"><img src="/assets/varese-gallery/5.jpg" alt="Negozio Varese 5" class="object-cover w-full h-48" onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'/assets/varese-gallery/5.jpg mancante',className:'p-4 text-sm text-neutral-400'}))"></div>
          <div class="overflow-hidden card" data-aos="fade-up" data-aos-delay="250"><img src="/assets/varese-gallery/6.jpg" alt="Negozio Varese 6" class="object-cover w-full h-48" onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'/assets/varese-gallery/6.jpg mancante',className:'p-4 text-sm text-neutral-400'}))"></div>
        </div>
      </div>
    </section>

    <section id="dispositivi" class="section">
      <div class="container grid items-start gap-8 md:grid-cols-2">
        <div data-aos="fade-up">
          <h2 class="text-3xl font-bold md:text-4xl">Scopri i nostri dispositivi</h2>
          <p class="mt-2 text-neutral-300">Seleziona un dispositivo dalla galleria a destra per leggere descrizione e prezzo (quando disponibile).</p>
          <div class="mt-6 card">
            <h3 id="dev-name" class="text-2xl font-extrabold">&nbsp;</h3>
            <p id="dev-desc" class="mt-2 text-neutral-300">&nbsp;</p>
            <p id="dev-price" class="mt-3 text-lg font-semibold text-green-400"></p>
            <div class="flex gap-3 mt-4">
              <a href="#contatti" class="btn-primary">Chiedi disponibilità</a>
            </div>
          </div>
        </div>
        <div data-aos="fade-left">
          <div class="relative">
            <div id="dev-carousel" class="flex gap-3 pb-2 overflow-x-auto snap-x snap-mandatory"></div>
            <div class="flex items-center justify-between mt-3">
              <button id="dev-prev" class="btn-primary" type="button">◀</button>
              <button id="dev-next" class="btn-primary" type="button">▶</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="recensioni" class="section">
      <div class="container text-center">
        <h2 class="mb-6 text-3xl font-bold md:text-4xl" data-aos="fade-up">Recensioni Google</h2>
        <p class="mb-6 text-neutral-300" data-aos="fade-up" data-aos-delay="100">Leggi cosa dicono i nostri clienti su Varese.</p>
        <a href="https://www.google.com/search?q=viale+borri+162+varese&num=10&client=safari&sca_esv=3d3edac27adaa913&rls=en&hl=it-IT&biw=1710&bih=1073&tbm=lcl&sxsrf=AE3TifPBKm2JwteSmyYGurmOjd40T8ytMQ%3A1762945034883&ei=CmgUaYjbNZO5wN4P2LOiyQs&oq=viale+borri+162&gs_lp=Eg1nd3Mtd2l6LWxvY2FsIg92aWFsZSBib3JyaSAxNjIqAggAMgUQABiABDICECYyAhAmMgYQABgWGB4yAhAmMgIQJjICECYyCBAAGIAEGKIEMggQABiABBiiBDIIEAAYgAQYogRIj0hQmRFY2jZwAXgAkAEAmAGvAaAB1AyqAQQxMC42uAEByAEA-AEBmAIQoAKKDqgCAMICBRAhGKABwgILEAAYgAQYsQMYgwHCAg4QABiABBixAxiDARiKBcICCBAAGIAEGLEDwgIKEAAYgAQYQxiKBcICDRAAGIAEGEMYyQMYigXCAg4QABiABBiSAxi4BBiKBcICCxAAGIAEGJIDGIoFwgINEAAYgAQYsQMYQxiKBcICBBAAGAOYAwfxBZQwOvjob49yiAYBkgcFNy44LjGgB4tbsgcFNy44LjG4B4oOwgcIMi0xMS40LjHIB30&sclient=gws-wiz-local#" target="_blank" rel="noopener" class="btn-primary" data-aos="zoom-in">Apri le recensioni</a>
      </div>
    </section>

    <section class="section" id="contatti">
      <div class="container">
        <div class="grid gap-6 md:grid-cols-1">
          <div class="card" data-aos="fade-up">
            <h3 class="text-lg font-semibold">Varese</h3>
            <p class="mt-1 text-neutral-300">Viale Luigi Borri, 162</p>
            <p class="mt-3">Telefono: <a class="text-green-400 hover:underline" href="tel:+393882552292">388 255 2292</a></p>
            <p class="mt-1">WhatsApp: <a class="text-green-400 hover:underline" href="https://wa.me/393882552292" target="_blank" rel="noopener">Chatta ora</a></p>
            <div class="mt-4 overflow-hidden border rounded-lg border-white/10">
              <iframe title="Mappa Varese" src="https://www.google.com/maps?q=Viale+Luigi+Borri,+162,+Varese&output=embed" width="100%" height="220" style="border:0;" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div id="footer"></div>

    <script type="module">
      import "./main.js";
      import { renderHeader, renderFooter, renderTeam, enablePageTransitions } from "./components.js";
      // Prevent automatic scroll restoration and ensure page opens at the top
      if ("scrollRestoration" in history) {
        history.scrollRestoration = "manual";
      }
      // On page show (including bfcache restores), keep top unless a hash is present
      window.addEventListener("pageshow", () => {
        if (!location.hash) {
          window.scrollTo(0, 0);
        }
      });
      document.getElementById("header").innerHTML = renderHeader("varese");
      document.getElementById("footer").innerHTML = renderFooter();
      renderTeam("team-grid");

      // === Devices data (Varese) ===
      const devices = [
        { name: "iPhone 15", desc: "128GB, vari colori, garanzia 24 mesi.", price: "€829", images: ["/assets/devices/iphone15-1.jpg", "/assets/devices/iphone15-2.jpg"] },
        { name: "Samsung Galaxy A55", desc: "Ottimo rapporto qualità/prezzo, display AMOLED.", price: "€349", images: ["/assets/devices/galaxy-a55-1.jpg", "/assets/devices/galaxy-a55-2.jpg"] },
        { name: "Xiaomi Redmi Note 13", desc: "Batteria a lunga durata e ricarica rapida.", price: null, images: ["/assets/devices/redmi13-1.jpg"] }
      ];

      const nameEl = document.getElementById("dev-name");
      const descEl = document.getElementById("dev-desc");
      const priceEl = document.getElementById("dev-price");
      const wrap = document.getElementById("dev-carousel");
      const prevBtn = document.getElementById("dev-prev");
      const nextBtn = document.getElementById("dev-next");

      function renderSlides() {
        wrap.innerHTML = devices
          .map((d, idx) => {
            const src = d.images[0];
            return `
              <button data-idx="${idx}" class="snap-center shrink-0 card overflow-hidden w-[260px] h-[180px] focus:outline-none" type="button">
                <img src="${src}" alt="${d.name}" class="object-cover w-full h-full" onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'immagine mancante',className:'p-4 text-sm text-neutral-400'}))"/>
              </button>
            `;
          })
          .join("");
      }

      renderSlides();

      // Updated show function to avoid auto-scrolling on first render
      function show(idx, { scroll = false } = {}) {
        current = (idx + devices.length) % devices.length;
        const d = devices[current];
        nameEl.textContent = d.name;
        descEl.textContent = d.desc;
        priceEl.textContent = d.price ? d.price : "";

        // only center the slide when user interacted
        if (scroll) {
          const btn = wrap.querySelector(`[data-idx="${current}"]`);
          if (btn) btn.scrollIntoView({ behavior: "smooth", inline: "center", block: "nearest" });
        }
      }

      show(0, { scroll: false });

      wrap.addEventListener("click", (e) => {
        const b = e.target.closest("[data-idx]");
        if (!b) return;
        show(parseInt(b.dataset.idx, 10), { scroll: true });
      });

      prevBtn.addEventListener("click", () => show(current - 1, { scroll: true }));
      nextBtn.addEventListener("click", () => show(current + 1, { scroll: true }));

      // === Slow smooth scroll for in-page anchors ===
      function smoothScrollTo(targetY, duration = 1100) {
        const startY = window.scrollY || window.pageYOffset;
        const delta = targetY - startY;
        const start = performance.now();
        const ease = (t) => (t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2);
        function step(now) {
          const p = Math.min(1, (now - start) / duration);
          window.scrollTo(0, startY + delta * ease(p));
          if (p < 1) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      }

      document.addEventListener("click", (e) => {
        const a = e.target.closest('a[href^="#"]');
        if (!a) return;
        const id = a.getAttribute("href").slice(1);
        if (!id) return;
        const el = document.getElementById(id);
        if (!el) return;
        e.preventDefault();
        const y = el.getBoundingClientRect().top + window.scrollY - 80; // compensate sticky header
        smoothScrollTo(y, 1200); // slower scroll
      });

      enablePageTransitions();
    </script>
  </body>
</html>